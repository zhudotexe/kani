POST https://api.openai.com/v1/chat/completions
accept: application/json
content-type: application/json
authorization: *** REDACTED ***

{"messages":[{"role":"user","content":"Call the flaky_function with x=42. Retry if it fails, it should eventually work."},{"role":"assistant","content":null,"tool_calls":[{"id":"call_NzXxMmtYv8q2kJypgv4GJvlp","type":"function","function":{"name":"flaky_function","arguments":"{\"x\":42}"}}]},{"role":"tool","content":"First call always fails!","tool_call_id":"call_NzXxMmtYv8q2kJypgv4GJvlp"},{"role":"assistant","content":null,"tool_calls":[{"id":"call_GVM5TDAjFE8CAiNew6QZSAMU","type":"function","function":{"name":"flaky_function","arguments":"{\"x\":42}"}}]},{"role":"tool","content":"Success! x = 42","tool_call_id":"call_GVM5TDAjFE8CAiNew6QZSAMU"}],"model":"gpt-5-mini","tools":[{"type":"function","function":{"name":"flaky_function","description":"A function that fails the first time.","parameters":{"description":"A function that fails the first time.","properties":{"x":{"type":"integer"}},"required":["x"],"title":"flaky_function","type":"object"}}}]}