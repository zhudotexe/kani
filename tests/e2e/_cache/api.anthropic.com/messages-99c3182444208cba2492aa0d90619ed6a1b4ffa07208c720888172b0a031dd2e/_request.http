POST https://api.anthropic.com/v1/messages
accept: application/json
content-type: application/json
x-api-key: *** REDACTED ***

{"max_tokens":2048,"messages":[{"role":"user","content":[{"type":"text","text":"Calculate: (2+3) * (4+5) * (6+7). Use functions for each step."}]},{"role":"assistant","content":[{"type":"text","text":"I'll calculate this step by step, starting with the additions in parentheses, then multiplying the results."},{"type":"tool_use","id":"toolu_012tJ13txjq7RQcjogW5jDFU","name":"add","input":{"a":2,"b":3}},{"type":"tool_use","id":"toolu_01FbNJ6Yis1Bd3QppsNs5Spe","name":"add","input":{"a":4,"b":5}},{"type":"tool_use","id":"toolu_013EGEFvPHnUBuEqyp337Gu2","name":"add","input":{"a":6,"b":7}}]},{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_012tJ13txjq7RQcjogW5jDFU","content":"5"},{"type":"tool_result","tool_use_id":"toolu_01FbNJ6Yis1Bd3QppsNs5Spe","content":"9"},{"type":"tool_result","tool_use_id":"toolu_013EGEFvPHnUBuEqyp337Gu2","content":"13"}]}],"model":"claude-haiku-4-5","system":"You are a calculator assistant. Use functions for every calculation.","tool_choice":{"type":"none"},"tools":[{"name":"add","description":"Add two numbers together.","input_schema":{"description":"Add two numbers together.","properties":{"a":{"type":"integer"},"b":{"type":"integer"}},"required":["a","b"],"title":"add","type":"object"}},{"name":"divide","description":"Divide two numbers.","input_schema":{"description":"Divide two numbers.","properties":{"a":{"type":"number"},"b":{"type":"number"}},"required":["a","b"],"title":"divide","type":"object"}},{"name":"multiply","description":"Multiply two numbers together.","input_schema":{"description":"Multiply two numbers together.","properties":{"a":{"type":"integer"},"b":{"type":"integer"}},"required":["a","b"],"title":"multiply","type":"object"}}]}