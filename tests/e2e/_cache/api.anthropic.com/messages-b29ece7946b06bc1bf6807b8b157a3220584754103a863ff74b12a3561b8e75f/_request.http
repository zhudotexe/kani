POST https://api.anthropic.com/v1/messages
accept: application/json
content-type: application/json
x-api-key: *** REDACTED ***

{"max_tokens":2048,"messages":[{"role":"user","content":[{"type":"text","text":"What's the weather in San Francisco and New York? Report in Fahrenheit."}]},{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01DEFnEhS3w9wWWzzAoVwBqb","name":"get_weather","input":{"location":"San Francisco, CA","unit":"fahrenheit"}},{"type":"tool_use","id":"toolu_011Tyv4UUdfAXYAstTuDJbMH","name":"get_weather","input":{"location":"New York, NY","unit":"fahrenheit"}}]},{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01DEFnEhS3w9wWWzzAoVwBqb","content":"Weather in San Francisco, CA: Foggy, 65 degrees fahrenheit."},{"type":"tool_result","tool_use_id":"toolu_011Tyv4UUdfAXYAstTuDJbMH","content":"Weather in New York, NY: Sunny, 75 degrees fahrenheit."}]}],"model":"claude-haiku-4-5","system":"You are a weather assistant. Use the provided functions to answer weather questions.","tools":[{"name":"get_forecast","description":"Get the 3-day forecast for a location.","input_schema":{"description":"Get the 3-day forecast for a location.","properties":{"location":{"description":"The city and state, e.g. San Francisco, CA","type":"string"}},"required":["location"],"title":"get_forecast","type":"object"}},{"name":"get_weather","description":"Get the current weather in a given location.","input_schema":{"description":"Get the current weather in a given location.","properties":{"location":{"description":"The city and state, e.g. San Francisco, CA","type":"string"},"unit":{"title":"Unit","enum":["fahrenheit","celsius"],"type":"string"}},"required":["location","unit"],"title":"get_weather","type":"object"}}]}