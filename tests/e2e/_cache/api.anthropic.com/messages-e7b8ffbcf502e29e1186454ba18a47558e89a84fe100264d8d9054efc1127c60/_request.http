POST https://api.anthropic.com/v1/messages
accept: application/json
content-type: application/json
x-api-key: *** REDACTED ***

{"max_tokens":2048,"messages":[{"role":"user","content":[{"type":"text","text":"What's the current weather in Miami and what's the forecast for the next 3 days?"}]},{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01TrqkfVXGLoAutMAUqEtHrh","name":"get_weather","input":{"location":"Miami, FL","unit":"fahrenheit"}},{"type":"tool_use","id":"toolu_01ShZGSyY3XB7Djziydjubkx","name":"get_forecast","input":{"location":"Miami, FL"}}]},{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01TrqkfVXGLoAutMAUqEtHrh","content":"Weather in Miami, FL: Humid, 85 degrees fahrenheit."},{"type":"tool_result","tool_use_id":"toolu_01ShZGSyY3XB7Djziydjubkx","content":"3-day forecast for Miami, FL: Day 1: Partly cloudy, Day 2: Sunny, Day 3: Rainy"}]}],"model":"claude-haiku-4-5","system":"You are a weather assistant. Use the provided functions to answer weather questions.","tools":[{"name":"get_forecast","description":"Get the 3-day forecast for a location.","input_schema":{"description":"Get the 3-day forecast for a location.","properties":{"location":{"description":"The city and state, e.g. San Francisco, CA","type":"string"}},"required":["location"],"title":"get_forecast","type":"object"}},{"name":"get_weather","description":"Get the current weather in a given location.","input_schema":{"description":"Get the current weather in a given location.","properties":{"location":{"description":"The city and state, e.g. San Francisco, CA","type":"string"},"unit":{"title":"Unit","enum":["fahrenheit","celsius"],"type":"string"}},"required":["location","unit"],"title":"get_weather","type":"object"}}],"stream":true}